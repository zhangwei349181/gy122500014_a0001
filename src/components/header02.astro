    <!-- Header -->
    <header id="header" class="fixed-top bg-body shadow-sm">
        <nav class="navbar header-navbar navbar-expand-xl pt-4 pb-4 pt-xl-1 pb-xl-1">
            <div class="container">
                <a class="navbar-brand me-5" href="index.html">
                    <img src="/assets/img/logo/logo.png" alt="Miso" height="32">
                </a>
                <div class="offcanvas offcanvas-navbar offcanvas-end border-start-0" tabindex="-1" id="offcanvasNavbar">
                    <div class="offcanvas-header border-bottom">
                        <a class="navbar-brand" href="index.html">
                            <img src="/assets/img/logo/logo.png" alt="Miso" height="32">
                        </a>
                        <button type="button" class="btn-close shadow-none" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body align-items-center">
                        <ul class="navbar-nav flex-grow-1 fw-medium fs-6">
                            <li class="nav-item me-2">
                                <a class="nav-link text-uppercase pt-xl-4 pb-xl-4 active" aria-current="page" href="/">首页</a>
                            </li>
                            <li class="nav-item dropdown me-2">
                                <a class="nav-link text-uppercase dropdown-toggle-hover pt-xl-4 pb-xl-4" href="/productslist/13-1" aria-expanded="false" data-bs-toggle="static">
                                    <span>产品</span>
                                    <i class="bi bi-chevron-down dropdown-toggle-icon"></i>
                                </a>
                                <div class="dropdown-menu rounded-1 border-0 shadow-sm">
                                    <div class="d-xl-flex flex-nowrap p-xl-2">
                                        <div class="me-xl-2">
                                            <h6 class="ms-3 pt-2 pb-1 pe-2">女装</h6>
                                            <ul class="list-unstyled ms-4 ms-xl-0">
                                                <li><a class="dropdown-item" href="/productslist/10-1">半身裙</a></li>
                                                <li><a class="dropdown-item" href="/productslist/8-1">衬衫</a></li>
                                                <li><a class="dropdown-item" href="/productslist/9-1">T恤</a></li>
                                                <li><a class="dropdown-item" href="/productslist/13-1">连衣裙</a></li>
                                                <li><a class="dropdown-item" href="/productslist/14-1">	西装</a></li>
                                            </ul>
                                        </div>
                                        <div class="ms-xl-2">
                                            <h6 class="ms-3 pt-2 pb-1 pe-2">男装</h6>
                                            <ul class="list-unstyled ms-4 ms-xl-0">
                                                <li><a class="dropdown-item" href="/productslist/10-1">T-shirt</a></li>
                                                <li><a class="dropdown-item" href="/productslist/13-1">Shirts</a></li>
                                                <li><a class="dropdown-item" href="/productslist/13-1">Vest</a></li>
                                                <li><a class="dropdown-item" href="/productslist/13-1">Jacket</a></li>
                                                <li><a class="dropdown-item" href="/productslist/13-1">Pants</a></li>
                                                <li><a class="dropdown-item" href="/productslist/13-1">Underwear</a></li>
                                            </ul>
                                        </div>
                                        <div class="ms-xl-2">
                                            <h6 class="ms-3 pt-2 pb-1 pe-2">童装</h6>
                                            <ul class="list-unstyled ms-4 ms-xl-0">
                                                <li><a class="dropdown-item" href="/productslist/10-1">Shirt</a></li>
                                                <li><a class="dropdown-item" href="/productslist/13-1">Dress</a></li>
                                                <li><a class="dropdown-item" href="/productslist/13-1">Skirt</a></li>
                                                <li><a class="dropdown-item" href="/productslist/13-1">Trousser</a></li>
                                                <li><a class="dropdown-item" href="/productslist/13-1">Jacket</a></li>
                                                <li><a class="dropdown-item" href="/productslist/13-1">Underwear</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="nav-item dropdown me-2">
                                <a class="nav-link text-uppercase dropdown-toggle-hover pt-xl-4 pb-xl-4" href="/postlist/1-1" aria-expanded="false" data-bs-toggle="static">
                                    <span>文章</span>
                                    <i class="bi bi-chevron-down dropdown-toggle-icon"></i>
                                </a>
                                <ul class="dropdown-menu rounded-1 border-0 shadow-sm">
                                    <li><a class="dropdown-item" href="/postlist/1-1">	公司介绍</a></li>
                                    <li><a class="dropdown-item" href="/postlist/2-1">关于我们</a></li>
                                    <li><a class="dropdown-item" href="/postlist/3-1">企业新闻</a></li>
                                </ul>
                            </li>
                            <!-- <li class="nav-item me-2">
                                <a class="nav-link text-uppercase pt-xl-4 pb-xl-4" href="blog.html">Blog</a>
                            </li> -->
                            <li class="nav-item dropdown me-2">
                                <a class="nav-link text-uppercase dropdown-toggle-hover pt-xl-4 pb-xl-4" href="product-grid.html" aria-expanded="false" data-bs-toggle="static">
                                    <span>单页</span>
                                    <i class="bi bi-chevron-down dropdown-toggle-icon"></i>
                                </a>
                                <div class="dropdown-menu rounded-1 border-0 shadow-sm">
                                    <div class="d-xl-flex flex-nowrap p-xl-2">
                                        <div class="me-xl-2">
                                            <h6 class="ms-3 pt-2 pb-1 pe-2">My Account</h6>
                                            <ul class="list-unstyled ms-4 ms-xl-0">
                                                <li><a class="dropdown-item" href="dashboard.html">Dashboard</a></li>
                                                <li><a class="dropdown-item" href="wishlist.html">Wishlist</a></li>
                                                <li><a class="dropdown-item" href="orders.html">Orders</a></li>
                                                <li><a class="dropdown-item" href="address.html">Address</a></li>
                                                <li><a class="dropdown-item" href="setting.html">Setting</a></li>
                                                <li><a class="dropdown-item" href="change-password.html">Change Password</a></li>
                                            </ul>
                                        </div>
                                        <div class="ms-xl-2">
                                            <h6 class="ms-3 pt-2 pb-1 pe-2">Other Pages</h6>
                                            <ul class="list-unstyled ms-4 ms-xl-0">
                                                <li><a class="dropdown-item" href="about.html">About</a></li>
                                                <li><a class="dropdown-item" href="contact.html">Contact</a></li>
                                                <li><a class="dropdown-item" href="shopping-cart.html">Shopping Cart</a></li>
                                                <li><a class="dropdown-item" href="checkout.html">Checkout</a></li>
                                                <li><a class="dropdown-item" href="404.html">404</a></li>
                                                <li><a class="dropdown-item" href="coming-soon.html">Coming Soon</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                        <ul class="list-inline mb-0 d-flex align-items-center nav-icon-links">
                            <li class="list-inline-item">
                                <a data-bs-toggle="offcanvas" href="#ocSearch" class="icon-link">
                                    <i class="bi bi-search"></i>
                                </a>
                            </li>
                            <li class="list-inline-item">
                                <a href="/shop/wishlist" class="icon-link">
                                    <i class="bi bi-heart"></i>
                                    <span class="badge bg-dark">9+</span>
                                </a>
                            </li>
                            <li class="list-inline-item">
                                <a data-bs-toggle="offcanvas" href="#ocCart" class="icon-link">
                                    <i class="bi bi-bag"></i>
                                    <span class="badge bg-dark" id="cartCount">0</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="d-flex justify-content-center ps-4 ms-auto">
                    <a href="#" class="border-0 icon-link" id="userAvatarLink">
                        <img src="/assets/img/avatar/a1.jpg" height="40" width="40" class="rounded-circle" alt="" id="userAvatar">
                    </a>
                </div>
                <button class="navbar-toggler shadow-none border-0" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>
        </nav>
    </header>
    <!-- /Header -->

    <script>
        // 定义购物车商品类型
        interface CartItem {
            quantity: number;
            [key: string]: any;
        }

        // 更新购物车数量显示
        function updateCartCount() {
            const cartCountElement = document.getElementById('cartCount');
            if (!cartCountElement) return;

            try {
                // 从本地存储获取购物车数据
                const cartData = localStorage.getItem('cart');
                if (cartData) {
                    const cartItems = JSON.parse(cartData) as CartItem[];
                    // 计算商品总数（使用商品数量而不是记录数）
                const totalItems = cartItems.reduce((total: number, item: { quantity: number }) => total + item.quantity, 0);
                cartCountElement.textContent = totalItems > 0 ? totalItems.toString() : '0';
                } else {
                    cartCountElement.textContent = '0';
                }
            } catch (error) {
                console.error('获取购物车数据失败:', error);
                cartCountElement.textContent = '0';
            }
        }

        // 检查用户登录状态并更新头像和链接
        function updateUserAvatar() {
            const userAvatarLink = document.getElementById('userAvatarLink');
            const userAvatar = document.getElementById('userAvatar') as HTMLImageElement;
            
            if (!userAvatarLink || !userAvatar) return;

            // 从本地存储获取用户数据
            const userDataStr = localStorage.getItem('userData');
            if (userDataStr) {
                try {
                    const userData = JSON.parse(userDataStr);
                    // 如果有用户数据，更新头像和链接
                    if (userData.avatar) {
                        userAvatar.src = userData.avatar;
                    }
                    userAvatarLink.setAttribute('href', '/shop/dashboard');
                    userAvatarLink.setAttribute('data-bs-toggle', '');
                } catch (error) {
                    console.error('解析用户数据失败:', error);
                    resetToDefaultState();
                }
            } else {
                resetToDefaultState();
            }
        }

        // 重置为默认状态（未登录）
        function resetToDefaultState() {
            const userAvatarLink = document.getElementById('userAvatarLink');
            const userAvatar = document.getElementById('userAvatar') as HTMLImageElement;
            
            if (!userAvatarLink || !userAvatar) return;

            userAvatar.src = '/assets/img/avatar/a1.jpg';
            userAvatarLink.setAttribute('href', '#');
            userAvatarLink.setAttribute('data-bs-toggle', 'modal');
            userAvatarLink.setAttribute('data-bs-target', '#mdlLogin');
        }

        // 页面加载时检查登录状态和购物车数量
        document.addEventListener('DOMContentLoaded', () => {
            updateUserAvatar();
            updateCartCount();
        });

        // 监听登录模态框的关闭事件，更新头像状态
        const loginModal = document.getElementById('mdlLogin');
        if (loginModal) {
            loginModal.addEventListener('hidden.bs.modal', updateUserAvatar);
        }

        // 监听购物车更新事件
        window.addEventListener('storage', (event) => {
            if (event.key === 'cart') {
                updateCartCount();
            }
        });
    </script>